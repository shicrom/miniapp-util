!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["miniapp-util"]=t()}(this,function(){"use strict";var e=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function r(e){return"object"===(void 0===e?"undefined":n(e))&&"number"==typeof e.length&&(e[0]||!e[0]&&e[0]+""=="")}function a(){for(var e=0;e<C.length;e++)C[e][0](C[e][1]);C=[],w=!1}function i(e,t){C.push([e,t]),w||(w=!0,k(a,0))}function c(e,t){function n(e){f(t,e)}function o(e){h(t,e)}try{e(n,o)}catch(e){o(e)}}function s(e){var t=e.owner,n=t.state_,o=t.data_,r=e[n],a=e.then;if("function"==typeof r){n=B;try{o=r(o)}catch(e){h(a,e)}}u(a,o)||(n===B&&f(a,o),n===T&&h(a,o))}function u(e,t){var o;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===(void 0===t?"undefined":n(t)))){var r=t.then;if("function"==typeof r)return r.call(t,function(n){o||(o=!0,t!==n?f(e,n):l(e,n))},function(t){o||(o=!0,h(e,t))}),!0}}catch(t){return o||h(e,t),!0}return!1}function f(e,t){e!==t&&u(e,t)||l(e,t)}function l(e,t){e.state_===b&&(e.state_=S,e.data_=t,i(p,e))}function h(e,t){e.state_===b&&(e.state_=S,e.data_=t,i(g,e))}function d(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)s(t[n])}function p(e){e.state_=B,d(e)}function g(e){e.state_=T,d(e)}function v(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof v==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],c(e,this)}var y=void 0!==v?v:null,m=y&&"resolve"in y&&"reject"in y&&"all"in y&&"race"in y&&function(){var e;return new y(function(t){e=t}),"function"==typeof e}();t?(t.Promise=m?y:v,t.Polyfill=v):e.exports=m?y:v;var w,b="pending",S="sealed",B="fulfilled",T="rejected",D=function(){},k="undefined"!=typeof setImmediate?setImmediate:setTimeout,C=[];v.prototype={constructor:v,state_:b,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(D),fulfilled:e,rejected:t};return this.state_===B||this.state_===T?i(s,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},v.all=function(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to Promise.all().");return new t(function(t,n){for(var o,r=[],a=0,i=0;i<e.length;i++)o=e[i],o&&"function"==typeof o.then?o.then(function(e){return a++,function(n){r[e]=n,--a||t(r)}}(i),n):r[i]=o;a||t(r)})},v.race=function(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to Promise.race().");return new t(function(t,n){for(var o,r=0;r<e.length;r++)o=e[r],o&&"function"==typeof o.then?o.then(t,n):t(o)})},v.resolve=function(e){var t=this;return e&&"object"===(void 0===e?"undefined":n(e))&&e.constructor===t?e:new t(function(t){t(e)})},v.reject=function(e){return new this(function(t,n){n(e)})}}("undefined"==typeof global||global)}),t=e.Polyfill,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o=["request","connectSocket","sendSocketMessage","closeSocket","getNetworkType","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","startRecord","stopRecord","playVoice","pauseVoice","stopVoice","getBackgroundAudioPlayerState","playBackgroundAudio","seekBackgroundAudio","chooseVideo","saveVideoToPhotosAlbum","saveFile","getFileInfo","getSavedFileList","getSavedFileInfo","removeSavedFile","openDocument","uploadFile","downloadFile","setStorage","getStorage","getStorageInfo","removeStorage","getLocation","chooseLocation","openLocation","getSystemInfo","startAccelerometer","stopAccelerometer","startCompass","makePhoneCall","addPhoneContact","scanCode","setClipboardData","getClipboardData","openBluetoothAdapter","closeBluetoothAdapter","getBluetoothAdapterState","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","getBluetoothDevices","getConnectedBluetoothDevices","createBLEConnection","closeBLEConnection","getBLEDeviceServices","getBLEDeviceCharacteristics","readBLECharacteristicValue","writeBLECharacteristicValue","notifyBLECharacteristicValueChange","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","setScreenBrightness","getScreenBrightness","setKeepScreenOn","vibrateLong","vibrateShort","getHCEState","startHCE","stopHCE","sendHCEMessage","startWifi","stopWifi","connectWifi","getWifiList","setWifiList","getConnectedWifi","showToast","showLoading","showModal","showActionSheet","setNavigationBarTitle","navigateTo","redirectTo","switchTab","reLaunch","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","setTabBarStyle","setTabBarItem","showTabBar","hideTabBar","setTopBarText","canvasToTempFilePath","canvasGetImageData","canvasPutImageData","startPullDownRefresh","login","checkSession","authorize","getUserInfo","showShareMenu","hideShareMenu","updateShareMenu","getShareInfo","requestPayment","checkIsSupportSoterAuthentication","startSoterAuthentication","checkIsSoterEnrolledInDevice","chooseAddress","addCard","openCard","openSetting","getSetting","getWeRunData","navigateToMiniProgram","navigateBackMiniProgram","getExtConfig","chooseInvoiceTitle","createWorker"],r={};wx.p={};for(var a in wx)!function(e){if(-1!==o.indexOf(e)){var a=function(o){return new t(function(t,r){wx[e](n({},o,{success:function(e){t(e)},fail:function(e){r(e)}}))})};wx.p[e]=a,r[e]=a}else r[e]=wx[e]}(a);var i=function(){},c=function(e){return e<10?"0"+Number(e):""+e},s=function(e){var t=Math.floor(e/60),n=e%60;return c(t)+":"+c(n)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!e)return"";var n=new Date(e),o=[{key:"M+",value:n.getMonth()+1},{key:"d+",value:n.getDate()},{key:"h+",value:n.getHours()},{key:"m+",value:n.getMinutes()},{key:"s+",value:n.getSeconds()}],r=t;if(/(y+)/.test(r)){var a=RegExp.$1;r=t.replace(a,(""+n.getFullYear()).substr(4-a.length))}for(var i=o.length,c=0;c<i;c+=1){var s=i[c],u=s.key,f=s.value;if(new RegExp("("+u+")").test(r)){var l=RegExp.$1;r=r.replace(l,("00"+f).substr((""+f).length))}}return r};return{Promise:t,wxp:r,noop:i,numToDouble:c,secondToMinute:s,formatTime:u,readableDate:function(e){if(!e)return"";switch((Date.now()-e)/36e5/24){case 0:return"今天";case 1:return"昨天";case 2:return"两天前";case 3:return"三天前";case 4:return"四天前";case 5:return"五天前";default:return u(e)}}}});
